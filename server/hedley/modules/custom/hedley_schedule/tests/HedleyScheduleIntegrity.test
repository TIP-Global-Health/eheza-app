<?php

/**
 * @file
 * Contains \HedleyScheduleIntegrity.
 */

/**
 * HedleyScheduleIntegrity tests.
 */
class HedleyScheduleIntegrity extends HedleyWebTestBase {

  /**
   * Info hook.
   */
  public static function getInfo() {
    return [
      'name' => 'HedleyScheduleIntegrity tests',
      'description' => 'Tests rules for maintaining integrity of session entities.',
      'group' => 'Hedley',
    ];
  }

  /**
   * Test creating a session and then deleting it.
   */
  public function testDeleteEmptySession() {
    $clinic_nid = $this->createClinic();
    $session_nid = $this->createSession($clinic_nid);

    // Make sure we can get it the session now.
    $session_node = node_load($session_nid);
    $this->assertTrue($session_node, "Should retrieve session we just created.");

    // Delete the session node.
    node_delete($session_nid);

    // Make sure we really deleted it.
    $session_node = node_load($session_nid);
    $this->assertFalse($session_node, "Session should no longer exist.");
  }

}
